{% block input %}
<input id="challenge-id" class="challenge-id" type="hidden" value="{{ challenge.id }}">
<input id="challenge-deadline" type="hidden" value="{{ challenge.deadline }}">
</div>
<div class="col-12">
    {% if challenge.deadline %}
    <div class="alert alert-info mb-3" id="deadline-alert">
        <i class="fas fa-clock"></i> <strong>제출 기한:</strong> <span id="deadline-text"></span>
        <div id="deadline-countdown" class="small mt-1"></div>
    </div>
    {% endif %}
    <label for="challenge-input" class="form-label">
        <strong>SQL Query:</strong>
    </label>
    <textarea 
        id="challenge-input" 
        class="challenge-input form-control" 
        name="submission" 
        rows="8" 
        placeholder="-- Enter your SQL query here
SELECT column1, column2
FROM table_name
WHERE condition;"
        x-model="submission"
        style="font-family: 'Courier New', monospace; font-size: 14px; display: none;"
    ></textarea>
    <div id="sql-editor-container" class="border" style="border-radius: 0.25rem;"></div>
    <small class="form-text text-muted">
        Press Ctrl+Enter to submit
    </small>
    
    <!-- Query Result Display Area -->
    <div id="query-result-container" class="mt-3" style="display: none;">
        <!-- Status Message -->
        <div id="status-message" class="alert mb-2">
            <span id="status-text"></span>
        </div>
        
        <!-- Your Query Result -->
        <div id="user-result-card" class="card mb-2">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0"><i class="fas fa-code"></i> Your Query Result</h6>
            </div>
            <div class="card-body p-0">
                <div id="user-result-content" class="table-responsive" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
        </div>
        
        <!-- Expected Result (only shown on incorrect) -->
        <div id="expected-result-card" class="card" style="display: none;">
            <div class="card-header bg-warning text-dark">
                <h6 class="mb-0"><i class="fas fa-check-circle"></i> Expected Result</h6>
            </div>
            <div class="card-body p-0">
                <div id="expected-result-content" class="table-responsive" style="max-height: 300px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>
</div>
<div style="display: none;">
{% endblock %}

{% block submit %}
</div>
</div>
<div class="row mt-3">
    <div class="col-12">
        <button
            id="challenge-submit"
            class="challenge-submit btn btn-primary w-100" 
            type="submit"
            @click.debounce.500ms="submitChallenge()"
        >
            <i class="fas fa-play"></i> Execute Query
        </button>
    </div>
</div>
<div style="display: none;">
{% endblock %}