<form method="POST">
    <div class="form-group">
        <label for="name">Name<br>
            <small class="form-text text-muted">
                The name of your challenge
            </small>
        </label>
        <input type="text" class="form-control challenge-name" name="name" value="{{ challenge.name }}" placeholder="Enter challenge name">
    </div>
    <div class="form-group">
        <label for="category">Category<br>
            <small class="form-text text-muted">
                The category of your challenge
            </small>
        </label>
        <input type="text" class="form-control challenge-category" name="category" value="{{ challenge.category }}" placeholder="Enter challenge category">
    </div>
    <div class="form-group">
        <label for="value">Value<br>
            <small class="form-text text-muted">
                The amount of points awarded for solving this challenge
            </small>
        </label>
        <input type="number" class="form-control challenge-value" name="value" value="{{ challenge.value }}" placeholder="Enter value" required>
    </div>
    <div class="form-group">
        <label for="description">Description<br>
            <small class="form-text text-muted">
                Use this to give a brief description of your challenge. The description supports HTML and Markdown.
            </small>
        </label>
        <textarea id="desc-editor" class="form-control challenge-desc" name="description" rows="10">{{ challenge.description }}</textarea>
    </div>
    
    <!-- SQL Challenge Specific Fields -->
    <div class="form-group">
        <label for="init_query">Initialization Query<br>
            <small class="form-text text-muted">
                SQL queries to initialize the database (CREATE TABLE, INSERT data, etc.). Separate multiple statements with semicolons.
            </small>
        </label>
        <textarea class="form-control challenge-init-query" name="init_query" rows="10">{{ challenge.init_query }}</textarea>
    </div>
    
    <div class="form-group">
        <label for="solution_query">Solution Query<br>
            <small class="form-text text-muted">
                The correct SQL query that produces the expected result.
            </small>
        </label>
        <textarea class="form-control challenge-solution-query" name="solution_query" rows="5">{{ challenge.solution_query }}</textarea>
    </div>
    
    <!-- Test Section -->
    <div class="form-group">
        <label>Test Your Queries<br>
            <small class="form-text text-muted">
                Test your initialization and solution queries.
            </small>
        </label>
        <button type="button" class="btn btn-primary" id="test-sql-btn">Test SQL Queries</button>
        <button type="button" class="btn btn-info" id="test-custom-btn">Test Custom Query</button>
        
        <div id="custom-query-section" class="mt-3" style="display: none;">
            <textarea class="form-control" id="custom-query" rows="3" placeholder="Enter a custom query to test"></textarea>
            <button type="button" class="btn btn-sm btn-success mt-2" id="run-custom-query">Run Custom Query</button>
        </div>
        
        <div id="test-results" class="mt-3" style="display: none;">
            <h5>Test Results:</h5>
            <div id="test-output" class="border p-3 bg-light"></div>
        </div>
    </div>
    
    <div class="form-group">
        <label for="connection_info">Connection Info<br>
            <small class="form-text text-muted">
                Optional connection information for the challenge
            </small>
        </label>
        <input type="text" class="form-control challenge-connection-info" name="connection_info" value="{{ challenge.connection_info }}" placeholder="Enter connection info">
    </div>
    
    <div class="form-group">
        <label for="state">State<br>
            <small class="form-text text-muted">
                The state of the challenge (visible, hidden)
            </small>
        </label>
        <select class="form-control challenge-state" name="state">
            <option value="visible" {% if challenge.state == "visible" %}selected{% endif %}>Visible</option>
            <option value="hidden" {% if challenge.state == "hidden" %}selected{% endif %}>Hidden</option>
        </select>
    </div>
    
    <div class="form-group">
        <label for="max_attempts">Max Attempts<br>
            <small class="form-text text-muted">
                Maximum amount of attempts users receive. Leave at 0 for unlimited.
            </small>
        </label>
        <input type="number" class="form-control challenge-max-attempts" name="max_attempts" placeholder="0" value="{{ challenge.max_attempts }}">
    </div>
    
    <button type="submit" class="btn btn-primary btn-outline-primary">Update</button>
</form>